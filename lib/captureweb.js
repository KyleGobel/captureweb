/** 
* @license captureweb - v0.0.4
* (c) 2013 Julien VALERY https://github.com/darul75/starter-aws
* License: MIT 
**/
function CaptureWeb(){this.serverPort=5001,this.clientServerPort=5002,this.server=require("./server"),this.client=require("./client"),this.renderer=require("./renderer"),this.options={debug:!0},this.init(),this.startServer(this.serverPort),this.startClientServer(this.clientServerPort),this.capture({url:"https://github.com",mime:"image/png",viewportSize:{w:1280,h:1024},viewportRect:{top:20,left:20,w:300,h:300}},function(a,b){b.pipe(require("fs").createWriteStream("github.png"))})}CaptureWeb.prototype.init=function(){return this},CaptureWeb.prototype.startServer=function(a){this.serverPort=a,this.server.start(a)},CaptureWeb.prototype.stopServer=function(){this.server.stop()},CaptureWeb.prototype.startClientServer=function(a){var b=this;this.clientServerPort=a,this.clientServer=require("http").createServer(function(a,c){var d="image/png";b.capture({url:"https://github.com",mime:d,viewportSize:{w:1280,h:1024}},function(a,b){return a?(c.setHeader("Content-Type","text/html"),c.write(a.toString()),c.end(),void 0):(c.writeHead(200,{"Content-Type":d}),b.pipe(c),void 0)})}).listen(a)},CaptureWeb.prototype.stopClientServer=function(){this.clientServer.stop()},CaptureWeb.prototype.capture=function(a,b){return this.client.render("http://localhost:"+this.serverPort+"/",a,b),this},CaptureWeb.prototype.exec=function(a,b){return this.renderer.exec(a,b,function(){console.log("test")}),this};var captureweb=new CaptureWeb;module.exports=captureweb;